function InnityAd(id,url,options){this.ver="1.71";this.id=id;this.url=url;this.events=new Array();this.interval=["2","5","10","20","40","60","120","240"];this.pid="";this.autostart=true;this.intervalTracking=true;if(typeof options=="object"){this.pid=options.pid?options.pid:this.pid;this.autostart=typeof options.autostart=="boolean"?options.autostart:this.autostart;this.intervalTracking=typeof options.intervalTracking=="boolean"?options.intervalTracking:this.intervalTracking;}if(this.autostart){this.log("_ad_display","s");}if(!this.intervalTracking){this.interval=[];}this._tc();};InnityAd.prototype.log=function(_tZ,_tn){this.logEvent("",_tZ,_tn);};InnityAd.prototype.logEvent=function(_tW,_tZ,_tn){var _tu=typeof(this.events[_tZ]);if(_tu=="undefined"&&_tn=="s"){this.events[_tZ]=new Array();this.events[_tZ]["eventid"]=_tZ;this.events[_tZ]["counter"]=1;this.events[_tZ]["starttime"]=new Date().getTime();this.events[_tZ]["duration"]=0;this.events[_tZ]["status"]="s";this.events[_tZ]["end"]=0;}else if(_tu=="undefined"&&_tn=="c"){this.events[_tZ]=new Array();this.events[_tZ]["eventid"]=_tZ;this.events[_tZ]["counter"]=1;this.events[_tZ]["starttime"]=0;this.events[_tZ]["duration"]=0;this.events[_tZ]["status"]="c";this.events[_tZ]["end"]=0;}else if(_tu=="undefined"&&_tn=="f"){this.events[_tZ]=new Array();this.events[_tZ]["eventid"]=_tZ;this.events[_tZ]["counter"]=1;this.events[_tZ]["starttime"]=0;this.events[_tZ]["duration"]=0;this.events[_tZ]["status"]="f";this.events[_tZ]["end"]=1;}else if(_tu=="undefined"&&(_tn=="r"||_tn=="a")){this.events[_tZ]=new Array();this.events[_tZ]["eventid"]=_tZ;this.events[_tZ]["counter"]=_tn=="r"?1:0;this.events[_tZ]["starttime"]=new Date().getTime();this.events[_tZ]["duration"]=0;this.events[_tZ]["status"]="s";this.events[_tZ]["end"]=0;}else if(_tu=="undefined"){}else{switch(_tn){case "s":this._ti(_tZ);break;case "p":this._tB(_tZ);break;case "r":this._tt(_tZ);break;case "c":this._tV(_tZ);break;case "f":this._tG(_tZ);break;}}};InnityAd.prototype._tV=function(_tZ){this.events[_tZ]["counter"]++;};InnityAd.prototype._ti=function(_tZ){if(this.events[_tZ]["status"]!="s"){this.events[_tZ]["starttime"]=new Date().getTime();this.events[_tZ]["duration"]+=0;this.events[_tZ]["status"]="s";this.events[_tZ]["counter"]++;}};InnityAd.prototype._tB=function(_tZ){if(this.events[_tZ]["status"]!="p"){var _ty=new Date().getTime();var _tv=this.events[_tZ]["starttime"];var duration=(_ty-_tv)/1000;duration=Math.round(duration);this.events[_tZ]["duration"]+=duration;this.events[_tZ]["status"]="p";this.events[_tZ]["starttime"]=new Date().getTime();}};InnityAd.prototype._tt=function(_tZ){if(this.events[_tZ]["status"]!="s"){this.events[_tZ]["starttime"]=new Date().getTime();this.events[_tZ]["status"]="s";}};InnityAd.prototype._tG=function(_tZ){var _ty=new Date().getTime();var _tv=this.events[_tZ]["starttime"];var duration=(_ty-_tv)/1000;duration=Math.round(duration);this.events[_tZ]["duration"]+=duration;this.events[_tZ]["status"]="f";this.events[_tZ]["starttime"]=new Date().getTime();this.events[_tZ]["end"]++;};InnityAd.prototype._tg=function(_tZ){var _ty=new Date().getTime();var _tv=this.events[_tZ]["starttime"];var duration=0;if(_tv!=0){duration=(_ty-_tv)/1000;}duration=Math.round(duration);this.events[_tZ]["duration"]+=duration;this.events[_tZ]["starttime"]=new Date().getTime();};InnityAd.prototype._tO=function(){var _tl=this.url+"/activity/?c=";var post=false;var first=true;_tl+=this.id.split("c")[1];for(var i in this.events){if(typeof(this.events[i])!="undefined"){var name=this.events[i]["eventid"];var end=this.events[i]["end"];var _tN=this.events[i]["counter"];var _tn=this.events[i]["status"];if(_tn=="s"){this._tg(i);}var _th=this.events[i]["duration"];if(_tN>0||_th>0||(_tn=="f"&&(_tN>0||_th>0))){post=true;if(first){_tl+="&d=";first=false;}else{_tl+="~";}_tl+=name;_tN=_tN<0?0:_tN;_tl+="~"+_tN;end=end<0?0:end;_tl+="~"+end;_th=_th<0?0:_th;_tl+="~"+_th;this.events[i]["counter"]=0;this.events[i]["duration"]=0;this.events[i]["end"]=0;}}}if(post){_tl+="&pid="+this.pid+"&ver="+this.ver;_tl+="&cb="+new Date().getTime();(new Image()).src=_tl;}};InnityAd.prototype._tc=function(){var self=this;function _td(){self._tO();};for(var i=0;i<this.interval.length;i++){window.setTimeout(_td,this.interval[i]*1000);}if(window.attachEvent){window.attachEvent("onbeforeunload",_td);}else{window.addEventListener("unload",_td,false);}};InnityAd.prototype.clear=function(){this._tO();this.events=new Array();} 